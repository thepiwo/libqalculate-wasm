#!/usr/bin/env bash
docker run --mount type=bind,source=.,target=/src --pull always --platform linux/amd64 ghcr.io/stephtr/libqalculate-wasm:main emcc -I /opt/include -L /opt/lib -lqalculate -lgmp -lmpfr -lxml2 --bind /src/src/libqalculate.cc -o /src/src/libqalculate.js -O2 -s MODULARIZE -s ENVIRONMENT=node -s FILESYSTEM=0 -s EXPORT_ES6=0 -s EXPORT_NAME=createModule -s ERROR_ON_UNDEFINED_SYMBOLS=0 --closure 1
